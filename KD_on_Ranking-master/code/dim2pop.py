import matplotlib.pyplot as plt
import plot_data as pla
import plot_mymodel as pla_m
def array(x):
    return x


#dims = ['c_teacher','u_tracher','student','cd','ud']
#dims = ['my-400','old-400','my-128','old-128']
#dims = ['de_rrd','ud']
#dims=['64','128','192','256','300','350','400']
#dims=['0.0','0.02','0.04','0.06','0.08','0.10','0.12', '0.14','0.16','0.18','0.20','0.22','0.24','0.26','0.28','0.30']
#dims = ['5','10']
dims = ['b-b','u-m','b-m','m-m']
# yelp_lgn = []
amaz_mf = [{
    'precision': array([0.00318941, 0.00269134, 0.00239044]),
    'recall': array([0.00339184, 0.00710964, 0.0126624]),
    'ndcg': array([0.00469683, 0.00596571, 0.0079575])
}, {
    'precision': array([0.00959862, 0.00860513, 0.00763406]),
    'recall': array([0.01101034, 0.02429993, 0.04255774]),
    'ndcg': array([0.01180628, 0.01704522, 0.0237134])
}, {
    'precision': array([0.01171286, 0.01023726, 0.00893148]),
    'recall': array([0.01401258, 0.03009367, 0.05144881]),
    'ndcg': array([0.0146193, 0.02104392, 0.02886385])
}, {
    'precision': array([0.01305017, 0.01140816, 0.00991547]),
    'recall': array([0.01595434, 0.03414778, 0.05813693]),
    'ndcg': array([0.01640149, 0.02373864, 0.03251604])
}, {
    'precision': array([0.01378151, 0.01203655, 0.01033604]),
    'recall': array([0.0171846, 0.03647103, 0.06106943]),
    'ndcg': array([0.01773145, 0.02551998, 0.03452269])
}, {
    'precision': array([0.01694812, 0.01450677, 0.01237505]),
    'recall': array([0.0214776, 0.0448984, 0.07434629]),
    'ndcg': array([0.02186425, 0.03128712, 0.04208539])
}, {
    'precision': array([0.01870904, 0.01587144, 0.01332333]),
    'recall': array([0.02381021, 0.04920175, 0.08024186]),
    'ndcg': array([0.0242411, 0.03448097, 0.04583813])
}, {
    'precision': array([0.01968163, 0.01646487, 0.01385255]),
    'recall': array([0.02525495, 0.05144778, 0.08364991]),
    'ndcg': array([0.0256557, 0.03615927, 0.04798495])
}]

gowa_mf = [{
    'precision': array([0.01424744, 0.01075893, 0.00801661]),
    'recall': array([0.02097629, 0.03852846, 0.05575266]),
    'ndcg': array([0.02308869, 0.02844985, 0.03400099])
}, {
    'precision': array([0.04647666, 0.03055797, 0.02199143]),
    'recall': array([0.07414823, 0.12191316, 0.17504794]),
    'ndcg': array([0.07953955, 0.09324935, 0.10969389])
}, {
    'precision': array([0.04900864, 0.03360305, 0.02467948]),
    'recall': array([0.08049799, 0.1364823, 0.19944917]),
    'ndcg': array([0.08367846, 0.10115474, 0.12070129])
}, {
    'precision': array([0.05140331, 0.03519057, 0.02597495]),
    'recall': array([0.08608, 0.14538852, 0.21165158]),
    'ndcg': array([0.08839272, 0.10717944, 0.12792143])
}, {
    'precision': array([0.05031817, 0.03487173, 0.02560319]),
    'recall': array([0.08193279, 0.14103901, 0.20569138]),
    'ndcg': array([0.07259724, 0.09185756, 0.11215137])
}, {
    'precision': array([0.05815862, 0.03986201, 0.02915132]),
    'recall': array([0.09886457, 0.1675994, 0.2408185]),
    'ndcg': array([0.09995954, 0.12212355, 0.14517874])
}, {
    'precision': array([0.06010784, 0.0413812, 0.03025923]),
    'recall': array([0.10255976, 0.17363906, 0.24919608]),
    'ndcg': array([0.10343133, 0.126663, 0.15055643])
}, {
    'precision': array([0.06160493, 0.04224529, 0.03078036]),
    'recall': array([0.10428687, 0.17561653, 0.25256792]),
    'ndcg': array([0.10480972, 0.12799754, 0.15224579])
}]

gowa_mf_bias = [{
    'APT': [0.8311856677160638, 0.15589903320159607, 0.01291529908232329],
    'I_KL':
    2.375745400841662,
    'I_bin':
    176.32677165354332
}, {
    'APT': [0.7400961774622021, 0.24481155245942163, 0.014982026034340873],
    'I_KL':
    1.8819884503508268,
    'I_bin':
    45.06867924528302
}, {
    'APT': [0.7458721280728748, 0.2337801705852172, 0.020252807734387288],
    'I_KL':
    1.4932388066666107,
    'I_bin':
    302.1045531197302
}, {
    'APT': [0.7358287561122552, 0.24119024493715033, 0.02288052336615493],
    'I_KL':
    1.5141943563065705,
    'I_bin':
    279.04672897196264
}, {
    'APT': [0.7291122423917602, 0.24607726572443375, 0.024712807287828226],
    'I_KL':
    1.533827086443457,
    'I_bin':
    281.0164705882353
}]

amaz_mf_bias = [{
    'APT': [0.7944859715441149, 0.19540204775561998, 0.010077313223030033],
    'I_KL':
    2.097238213855153,
    'I_bin':
    248.1112289383763
}, {
    'APT': [0.7795656592519877, 0.20634367342287424, 0.014087817943500365],
    'I_KL':
    2.2724564111065644,
    'I_bin':
    75.71536442414872
}, {
    'APT': [0.8352834184981036, 0.16029861520049052, 0.004369051915734428],
    'I_KL':
    1.6874541107393488,
    'I_bin':
    722.3739279588336
}, {
    'APT': [0.8285617271051446, 0.16595036377104794, 0.005452291852668146],
    'I_KL':
    1.71128377695144,
    'I_bin':
    729.1274238227146
}, {
    'APT': [0.8245512223846693, 0.16930646049805834, 0.0060805805140285735],
    'I_KL':
    1.7349956512818632,
    'I_bin':
    668.6948237535726
}]

gowa_lgn = [
    {'ndcg': array([0.11969991, 0.13962095, 0.16162426]),
    'precision': array([0.06623016, 0.04290441, 0.03049233]),
    'recall': array([0.11160807, 0.17661897, 0.24636399])},
    {'ndcg': array([0.12798863, 0.14962146, 0.17322873]),
    'precision': array([0.07175966, 0.0468176 , 0.03309599]),
    'recall': array([0.11885217, 0.19085001, 0.26681713])},
    {'ndcg': array([0.13294854, 0.15505251, 0.17986597]),
    'precision': array([0.07480742, 0.04874539, 0.03460647]),
    'recall': array([0.12396816, 0.19788642, 0.27752247])},
    {'ndcg': array([0.13369998, 0.15580595, 0.18083637]),
    'precision': array([0.07554089, 0.04906424, 0.03484694]),
    'recall': array([0.12443478, 0.19868409, 0.27908127])},
    {'ndcg': array([0.13347635, 0.15548484, 0.18086682]),
    'precision': array([0.07541362, 0.04895974, 0.03491192]),
    'recall': array([0.12431156, 0.19822096, 0.27967101])}
            ]
gowa_lgn_bias = [
    {'I_KL': 2.7870186651069786,
     'APT': [0.9328722620403734, 0.06566079442695053, 0.0014167057405050656],
     'APT5': [0.8370821890280994, 0.09583696161831518, 0.05705673521334025, 0.00860405921361089, 0.0014167057405050656],
     'I_bin': 86.46973646104836},
    {'I_KL': 2.721979627004767,
     'APT': [0.9178109719338658, 0.0798010583428167, 0.0023377319311407435],
     'APT5': [0.8166086141068015, 0.10124924643310515, 0.0672684037778777, 0.012532654564940932, 0.0023377319311407435],
     'I_bin': 88.25894176766184},
    {'I_KL': 2.70995012441237,
     'APT': [0.9040156741912115, 0.09235045883849494, 0.0035668832473708507],
     'APT5': [0.7991325607877527, 0.10495009712638637, 0.07597293857592077, 0.01637752026257669, 0.0035668832473708507],
     'I_bin': 86.87227233052081},
    {'I_KL': 2.7080925656769166,
     'APT': [0.8977761403979267, 0.09812110657109575, 0.0040290709357625595],
     'APT5': [0.7930638354879981, 0.10478598700514544, 0.07996516846405745, 0.0181559381070407, 0.0040290709357625595],
     'I_bin': 85.99654377880184},
    {'I_KL': 2.707588474398145,
     'APT': [0.8948154598432931, 0.10077701118627366, 0.004330497689061495],
     'APT5': [0.7896476656172721, 0.1052448255073899, 0.08164980909638349, 0.019127202089892967, 0.004330497689061495],
     'I_bin': 87.22757814782355}
]
gowa_rd=[
{'ndcg': array([0.13347635, 0.15548484, 0.18086682]),
 'precision': array([0.07541362, 0.04895974, 0.03491192]),
 'recall': array([0.12431156, 0.19822096, 0.27967101])},
{'ndcg': array([0.12798863, 0.14962146, 0.17322873]),
 'precision': array([0.07175966, 0.0468176 , 0.03309599]),
 'recall': array([0.11885217, 0.19085001, 0.26681713])},
{'ndcg': array([0.13134112, 0.15233376, 0.17619482]),
 'precision': array([0.07319646, 0.04713779, 0.03337531]),
 'recall': array([0.12195487, 0.19221741, 0.26874873])},
{'ndcg': array([0.11576388, 0.13346905, 0.15402957]),
 'precision': array([0.06492397, 0.04200683, 0.02966508]),
 'recall': array([0.10484803, 0.16679542, 0.23347992])}
]
gowa_rd_bais=[
{'I_KL': 2.707588474398145,
'APT': [0.8948154598432931, 0.10077701118627366, 0.004330497689061495],
'APT5': [0.7896476656172721, 0.1052448255073899, 0.08164980909638349, 0.019127202089892967, 0.004330497689061495],
 'I_bin': 87.22757814782355},
{'I_KL': 2.721979627004767,
 'APT': [0.9178109719338658, 0.0798010583428167, 0.0023377319311407435],
'APT5': [0.8166086141068015, 0.10124924643310515, 0.0672684037778777, 0.012532654564940932, 0.0023377319311407435],
'I_bin': 88.25894176766184},
{'I_KL': 2.852439338123945,
'APT': [0.9259394467144826, 0.07184339205572653, 0.002176970996047976],
'APT5': [0.8320349655034139, 0.09394467144482911, 0.06047960345635771, 0.011363788599370431, 0.002176970996047976],
'I_bin': 77.67429760665974},
{'I_KL': 3.8944907155434527,
 'APT': [0.9828387701788589, 0.016963627838435535, 0.00019760198271819932],
'APT5': [0.9395806818943172, 0.04325808828454685, 0.015778015942126293, 0.0011856118963092014, 0.00019760198271819932],
 'I_bin': 67.73593466424681}
]
gowa_pca=[
{'ndcg': array([0.09885949, 0.11279695, 0.12925556]),
 'precision': array([0.05567017, 0.03570902, 0.02502914]),
 'recall': array([0.08754173, 0.13844831, 0.19191539])},
{'ndcg': array([0.11576388, 0.13346905, 0.15402957]),
 'precision': array([0.06492397, 0.04200683, 0.02966508]),
 'recall': array([0.10484803, 0.16679542, 0.23347992])},
{'ndcg': array([0.12736112, 0.14802343, 0.17186707]),
 'precision': array([0.07186014, 0.04663407, 0.0331824 ]),
 'recall': array([0.11752355, 0.18785232, 0.2646731 ])},
{'ndcg': array([0.13118876, 0.15285843, 0.17770896]),
 'precision': array([0.0742615 , 0.04829526, 0.03440217]),
 'recall': array([0.12238314, 0.19512871, 0.27504968])},
{'ndcg': array([0.13347635, 0.15548484, 0.18086682]),
 'precision': array([0.07541362, 0.04895974, 0.03491192]),
 'recall': array([0.12431156, 0.19822096, 0.27967101])}
]
gowa_pca_bais=[
{'I_KL': 4.510875558705984,
'APT': [0.9974646660861451, 0.0025185879831201054, 1.6745930738830465e-05],
 'APT5': [0.985501373166331, 0.011963292919820507, 0.00243820751557372, 8.038046754638625e-05, 1.6745930738830465e-05],
 'I_bin': 65.59314586994728},
{'I_KL': 3.8944907155434527,
 'APT': [0.9828387701788589, 0.016963627838435535, 0.00019760198271819932],
'APT5': [0.9395806818943172, 0.04325808828454685, 0.015778015942126293, 0.0011856118963092014, 0.00019760198271819932],
 'I_bin': 67.73593466424681},
{'I_KL': 3.2283473545423007,
'APT': [0.9466843057137365, 0.05208989215620513, 0.0011789135240136705],
 'APT5': [0.8663808694487499, 0.08035032487105115, 0.0455857726572442, 0.006504119498961625, 0.0011789135240136705],
'I_bin': 75.02010050251255},
{'I_KL': 2.851189564055041,
'APT': [0.91153794627909, 0.08538750083729103, 0.002997521602250638],
 'APT5': [0.8124623216558565, 0.09915265590460506, 0.0708888740036134, 0.01449862683367976, 0.002997521602250638],
 'I_bin': 80.45809754783076},
{'I_KL': 2.707588474398145,
'APT': [0.8948154598432931, 0.10077701118627366, 0.004330497689061495],
'APT5': [0.7896476656172721, 0.1052448255073899, 0.08164980909638349, 0.019127202089892967, 0.004330497689061495],
 'I_bin': 87.22757814782355}
]
yelp_lgn=[
{'ndcg': array([0.03527888, 0.04760942, 0.06324376]),
 'precision': array([0.02794303, 0.02312113, 0.01938676]),
 'recall': array([0.03125702, 0.06403222, 0.10629163])},
{'ndcg': array([0.03890366, 0.05171651, 0.06821247]),
 'precision': array([0.03031767, 0.02460149, 0.02058545]),
 'recall': array([0.03420524, 0.06869872, 0.11337998])},
{'ndcg': array([0.04123177, 0.05466657, 0.07177894]),
 'precision': array([0.0323639 , 0.02607048, 0.02161046]),
 'recall': array([0.03667172, 0.07263105, 0.11917374])},
{'ndcg': array([0.04207526, 0.05617377, 0.07371799]),
 'precision': array([0.03293861, 0.02672477, 0.02214286]),
 'recall': array([0.0373924 , 0.07489831, 0.12253744])},
{'ndcg': array([0.04260639, 0.05684934, 0.07425926]),
 'precision': array([0.03323544, 0.02705823, 0.02228432]),
 'recall': array([0.03772804, 0.07570102, 0.12291847])}
]

yelp_lgn_bias=[
{'I_KL': 2.3747361855535414,
 'APT': [0.9353985095365088, 0.06445939118352524, 0.00013578375647341166],
 'APT5': [0.8141941391941725, 0.12120437034228625, 0.061020588606792, 0.0034388025767335805, 0.00013578375647341166],
'I_bin': 122.08172706245182},
{'I_KL': 2.3475696030123743,
 'APT': [0.9447486421625039, 0.055083996463304356, 0.0001578880889225717],
 'APT5': [0.8298818997095251, 0.11485095364404126, 0.05234305923960882, 0.002740937223695836, 0.0001578880889225717],
 'I_bin': 165.80104712041884},
{'I_KL': 2.48164648205567,
 'APT': [0.9466938234180218, 0.05310723758999426, 0.00018315018315018307],
'APT5': [0.8392130857648528, 0.10746810660602307, 0.050145257041807174, 0.002961980548187432, 0.00018315018315018307],
'I_bin': 157.70916334661354},
{'I_KL': 2.595919640271935,
 'APT': [0.9483390173045917, 0.05143678160919375, 0.0002178855627131488],
'APT5': [0.8446254894531224, 0.10367563471010481, 0.04825375773651502, 0.003183023872679028, 0.0002178855627131488],
 'I_bin': 177.01509223029626},
{'I_KL': 2.599445419776923,
 'APT': [0.9452980927119424, 0.05446823291650666, 0.00020841227737779445],
 'APT5': [0.8442465580396993, 0.10104521914865473, 0.05087785777440789, 0.0035903751420992506, 0.00020841227737779445],
'I_bin': 156.07688516510598}
]
yelp_rd=[
{'ndcg': array([0.04260639, 0.05684934, 0.07425926]),
 'precision': array([0.03323544, 0.02705823, 0.02228432]),
 'recall': array([0.03772804, 0.07570102, 0.12291847])},
{'ndcg': array([0.03890366, 0.05171651, 0.06821247]),
 'precision': array([0.03031767, 0.02460149, 0.02058545]),
 'recall': array([0.03420524, 0.06869872, 0.11337998])},
{'ndcg': array([0.03954984, 0.05288413, 0.06912212]),
 'precision': array([0.03086712, 0.02520525, 0.02072881]),
 'recall': array([0.0347923 , 0.07024003, 0.11431264])},
{'ndcg': array([0.04018013, 0.05348836, 0.07011533]),
 'precision': array([0.03128395, 0.02551724, 0.02113553]),
 'recall': array([0.03521957, 0.0709234 , 0.11617417])}
]

yelp_rd_bais=[
{'I_KL': 2.599445419776923,
 'APT': [0.9452980927119424, 0.05446823291650666, 0.00020841227737779445],
 'APT5': [0.8442465580396993, 0.10104521914865473, 0.05087785777440789, 0.0035903751420992506, 0.00020841227737779445],
'I_bin': 156.07688516510598},
{'I_KL': 2.3475696030123743,
 'APT': [0.9447486421625039, 0.055083996463304356, 0.0001578880889225717],
 'APT5': [0.8298818997095251, 0.11485095364404126, 0.05234305923960882, 0.002740937223695836, 0.0001578880889225717],
 'I_bin': 165.80104712041884},
{'I_KL': 2.526715718144018,
'APT': [0.9554345080207763, 0.04451496779082928, 3.4735379562965766e-05],
'APT5': [0.8525388404699257, 0.10286093217126217, 0.04240558292282412, 0.002109384868005568, 3.4735379562965766e-05],
 'I_bin': 141.3119143239625},
{'I_KL': 3.4392945191831332,
 'APT': [0.9932518630794648, 0.0067386636352152335, 0.0],
'APT5': [0.9496494884426327, 0.04360237463685702, 0.0067102437792091706, 2.84198560060629e-05, 0.0],
 'I_bin': 134.8722316865417}
]
yelp_pca=[
{'ndcg': array([0.03606109, 0.04816347, 0.0631967 ]),
 'precision': array([0.02816408, 0.02317923, 0.01918277]),
 'recall': array([0.0315471 , 0.06382865, 0.10478413])},
{'ndcg': array([0.04018013, 0.05348836, 0.07011533]),
 'precision': array([0.03128395, 0.02551724, 0.02113553]),
 'recall': array([0.03521957, 0.0709234 , 0.11617417])},
{'ndcg': array([0.04208321, 0.05616185, 0.07345653]),
 'precision': array([0.03290072, 0.02680687, 0.02206707]),
 'recall': array([0.03733907, 0.07478738, 0.12180165])},
{'ndcg': array([0.04281018, 0.05686664, 0.07445076]),
 'precision': array([0.03332386, 0.02696602, 0.0222818 ]),
 'recall': array([0.03761085, 0.07534887, 0.12306274])},
{'ndcg': array([0.04260639, 0.05684934, 0.07425926]),
 'precision': array([0.03323544, 0.02705823, 0.02228432]),
 'recall': array([0.03772804, 0.07570102, 0.12291847])}
]
yelp_pca_bais=[
{'I_KL': 3.963638750467643,
 'APT': [0.9984116458254453, 0.0015820386510041794, 0.0],
 'APT5': [0.978893520272851, 0.019518125552608807, 0.001578880889225728, 3.157761778451434e-06, 0.0],
 'I_bin': 112.65741728922093},
{'I_KL': 3.4392945191831332,
 'APT': [0.9932518630794648, 0.0067386636352152335, 0.0],
'APT5': [0.9496494884426327, 0.04360237463685702, 0.0067102437792091706, 2.84198560060629e-05, 0.0],
 'I_bin': 134.8722316865417},
{'I_KL': 2.948877144857152,
 'APT': [0.9745484400657196, 0.02542945560187054, 6.315523556902868e-06],
 'APT5': [0.8987495263357929, 0.07579891372994117, 0.024709485916383576, 0.0007199696854869276, 6.315523556902868e-06],
 'I_bin': 163.1530139103555},
{'I_KL': 2.6741999008523103,
'APT': [0.9560944802324634, 0.043776051534671886, 0.00010420613868889737],
'APT5': [0.8602406214475694, 0.0958507010231032, 0.041445623342175136, 0.0023304281924971617, 0.00010420613868889737],
 'I_bin': 184.97663551401865},
{'I_KL': 2.599445419776923,
 'APT': [0.9452980927119424, 0.05446823291650666, 0.00020841227737779445],
 'APT5': [0.8442465580396993, 0.10104521914865473, 0.05087785777440789, 0.0035903751420992506, 0.00020841227737779445],
'I_bin': 156.07688516510598}
]
amaz_lgn=[
{'ndcg': array([0.0195261 , 0.02774083, 0.0375227 ]),
 'precision': array([0.01532397, 0.01314059, 0.01128545]),
 'recall': array([0.01877868, 0.03930674, 0.06589028])},
{'ndcg': array([0.02325014, 0.03293015, 0.04412051]),
 'precision': array([0.01802329, 0.01537526, 0.01304713]),
 'recall': array([0.02247144, 0.04667133, 0.07724729])},
{'ndcg': array([0.0259405 , 0.03695626, 0.04916566]),
 'precision': array([0.02012803, 0.01717759, 0.01441825]),
 'recall': array([0.02547889, 0.05273372, 0.0860422 ])},
{'ndcg': array([0.02706887, 0.0383711 , 0.05095932]),
 'precision': array([0.02091826, 0.01774899, 0.01488061]),
 'recall': array([0.02665885, 0.054628  , 0.0889654 ])},
{'ndcg': array([0.02753939, 0.03902066, 0.05171129]),
 'precision': array([0.02135707, 0.01806584, 0.01506677]),
 'recall': array([0.02727769, 0.05568374, 0.09038972])}
]
amaz_lgn_bias=[
{'I_KL': 2.807533450917273,
'APT': [0.9465190053759323, 0.0530288927302727, 0.00044830271831012674],
 'APT5': [0.8564956404461374, 0.09001386699085688, 0.04749539349960598, 0.005533499230666875, 0.00044830271831012674],
'I_bin': 154.69585659712018},
{'I_KL': 2.7563990590392273,
'APT': [0.9401230932888522, 0.059194954694825726, 0.0006667553140968424],
'APT5': [0.8469407138652004, 0.09317098189692403, 0.05192903140018119, 0.00726592329464505, 0.0006667553140968424],
 'I_bin': 168.61947469570788},
{'I_KL': 2.7995693079087247,
 'APT': [0.9322986911841041, 0.06665273635620454, 0.001023877818513388],
'APT5': [0.8394278441579139, 0.09285375073608601, 0.057038922553800164, 0.009613813802405008, 0.001023877818513388],
 'I_bin': 155.2890855457227},
{'I_KL': 2.8349876412927784,
'APT': [0.929088387819931, 0.0696046957810092, 0.001291719696825797],
'APT5': [0.8357901335411138, 0.09327735881313343, 0.058925213228723544, 0.01067948255228632, 0.001291719696825797],
 'I_bin': 141.05841371918547},
{'I_KL': 2.858174062557481,
 'APT': [0.9273901563361635, 0.07116995611951561, 0.0014322891932450706],
'APT5': [0.83474725984471, 0.09263909731587837, 0.05975153391713424, 0.011416522614592837, 0.0014322891932450706],
 'I_bin': 137.4490861618799}
]
amaz_rd=[
{'ndcg': array([0.02753939, 0.03902066, 0.05171129]),
 'precision': array([0.02135707, 0.01806584, 0.01506677]),
 'recall': array([0.02727769, 0.05568374, 0.09038972])},
{'ndcg': array([0.02325014, 0.03293015, 0.04412051]),
 'precision': array([0.01802329, 0.01537526, 0.01304713]),
 'recall': array([0.02247144, 0.04667133, 0.07724729])},
{'ndcg': array([0.02389643, 0.03365784, 0.04480772]),
 'precision': array([0.01846209, 0.01560625, 0.013163  ]),
 'recall': array([0.02306079, 0.04750778, 0.07789229])},
{'ndcg': array([0.02053935, 0.0289363 , 0.03921059]),
 'precision': array([0.01607431, 0.01376213, 0.0118785 ]),
 'recall': array([0.0195203 , 0.0405262 , 0.06862019])}
]
amaz_rd_bais=[
{'I_KL': 2.858174062557481,
 'APT': [0.9273901563361635, 0.07116995611951561, 0.0014322891932450706],
'APT5': [0.83474725984471, 0.09263909731587837, 0.05975153391713424, 0.011416522614592837, 0.0014322891932450706],
 'I_bin': 137.4490861618799},
{'I_KL': 2.7563990590392273,
'APT': [0.9401230932888522, 0.059194954694825726, 0.0006667553140968424],
'APT5': [0.8469407138652004, 0.09317098189692403, 0.05192903140018119, 0.00726592329464505, 0.0006667553140968424],
 'I_bin': 168.61947469570788},
{'I_KL': 2.958933932796951,
'APT': [0.949039758372513, 0.05043975457325414, 0.0005166878787303166],
'APT5': [0.8670820431967332, 0.08194631764905949, 0.043962160211231255, 0.00647759436202342, 0.0005166878787303166],
 'I_bin': 152.80986937590708},
{'I_KL': 3.737324010271261,
 'APT': [0.9801208137834465, 0.019789905590487416, 7.78830993674373e-05],
'APT5': [0.9352677468989874, 0.044853066884482234, 0.0168341469901037, 0.0029557586003837173, 7.78830993674373e-05],
'I_bin': 119.23669309173275}
]
amaz_pca=[
{'ndcg': array([0.01747423, 0.0245563 , 0.03316117]),
 'precision': array([0.0138461 , 0.01188838, 0.01021712]),
 'recall': array([0.01633203, 0.0342716 , 0.05775537])},
{'ndcg': array([0.02053935, 0.0289363 , 0.03921059]),
 'precision': array([0.01607431, 0.01376213, 0.0118785 ]),
 'recall': array([0.0195203 , 0.0405262 , 0.06862019])},
{'ndcg': array([0.02409431, 0.03408921, 0.04569263]),
 'precision': array([0.01874323, 0.0159497 , 0.01354482]),
 'recall': array([0.02322395, 0.04825537, 0.07996413])},
{'ndcg': array([0.02650477, 0.03747298, 0.0499811 ]),
 'precision': array([0.02061243, 0.01736983, 0.01464924]),
 'recall': array([0.02601446, 0.05332672, 0.0874808 ])},
{'ndcg': array([0.02753939, 0.03902066, 0.05171129]),
 'precision': array([0.02135707, 0.01806584, 0.01506677]),
 'recall': array([0.02727769, 0.05568374, 0.09038972])}
]
amaz_pca_bais=[
{'I_KL': 4.26232817936875,
 'APT': [0.9895674638603562, 0.010426837376289364, 3.799175578899379e-06],
'APT5': [0.9673422867238166, 0.022225177136562035, 0.00852155082347132, 0.001905286552818041, 3.799175578899379e-06],
 'I_bin': 94.42690582959642},
{'I_KL': 3.737324010271261,
 'APT': [0.9801208137834465, 0.019789905590487416, 7.78830993674373e-05],
'APT5': [0.9352677468989874, 0.044853066884482234, 0.0168341469901037, 0.0029557586003837173, 7.78830993674373e-05],
'I_bin': 119.23669309173275},
{'I_KL': 3.2358359353060115,
 'APT': [0.9578633436544914, 0.04175673878768141, 0.0003723192067321388],
 'APT5': [0.8848963774861721, 0.07296316699275188, 0.036177649450068, 0.005579089337613702, 0.0003723192067321388],
 'I_bin': 139.08322324966974},
{'I_KL': 2.9492129565607392,
 'APT': [0.9377163155596093, 0.06138707900385104, 0.0008890070854624594],
'APT5': [0.8487548202041092, 0.0889557965921332, 0.0524476188667015, 0.0089394601371503, 0.0008890070854624594],
'I_bin': 153.74707943925233},
{'I_KL': 2.858174062557481,
 'APT': [0.9273901563361635, 0.07116995611951561, 0.0014322891932450706],
'APT5': [0.83474725984471, 0.09263909731587837, 0.05975153391713424, 0.011416522614592837, 0.0014322891932450706],
 'I_bin': 137.4490861618799}
]

comparsion=[
{'ndcg': array([0.12798863, 0.14962146, 0.17322873]),
 'precision': array([0.07175966, 0.0468176 , 0.03309599]),
 'recall': array([0.11885217, 0.19085001, 0.26681713])},
{'ndcg': array([0.13299585, 0.15397529, 0.17744398]),
 'precision': array([0.07420122, 0.04787461, 0.03360439]),
 'recall': array([0.12262558, 0.19430551, 0.27015311])},
{'ndcg': array([0.12979029, 0.15113025, 0.17492575]),
 'precision': array([0.07226204, 0.04705874, 0.03333043]),
 'recall': array([0.11941981, 0.19148068, 0.26803569])}
]

comparsion_bais=[
{'I_KL': 2.721979627004767,
 'APT': [0.9178109719338658, 0.0798010583428167, 0.0023377319311407435],
'APT5': [0.8166086141068015, 0.10124924643310515, 0.0672684037778777, 0.012532654564940932, 0.0023377319311407435],
'I_bin': 88.25894176766184},
{'I_KL': 2.926982720735678,
 'APT': [0.9302230557974818, 0.06779422600307784, 0.001935829593408815],
 'APT5': [0.8392256681626657, 0.091044276240864, 0.05740505057270837, 0.010389175430370394, 0.001935829593408815],
'I_bin': 78.96852684475007},
{'I_KL': 2.598755452775482,
 'APT': [0.8902270748208584, 0.10535199946412056, 0.004353941992095858],
 'APT5': [0.7772054390783233, 0.1130886194654548, 0.0867037309933612, 0.018648268470762473, 0.004353941992095858],
'I_bin': 83.77665544332213}
]

comparsion_gowa_pre=[
{'ndcg': array([0.1336101 , 0.15556293, 0.18091978]),
 'precision': array([0.07543372, 0.04896912, 0.03491192]),
 'recall': array([0.12432696, 0.1982233 , 0.27967457])},
{'ndcg': array([0.12545877, 0.14427954, 0.1659578 ]),
 'precision': array([0.06905017, 0.04407797, 0.03101681]),
 'recall': array([0.11425232, 0.17985911, 0.24986184])},
{'ndcg': array([0.1254865 , 0.14441506, 0.16613304]),
 'precision': array([0.06918079, 0.04429768, 0.031126  ]),
 'recall': array([0.11422177, 0.18039361, 0.25056932])},
{'ndcg': array([0.13237917, 0.15317605, 0.17689701]),
 'precision': array([0.07394333, 0.04763614, 0.03371291]),
 'recall': array([0.12210134, 0.19326836, 0.26948814])},
{'ndcg': array([0.12929729, 0.14898971, 0.17147026]),
 'precision': array([0.07157546, 0.04584098, 0.03229084]),
 'recall': array([0.11833474, 0.18645338, 0.25878216])},
# {'ndcg': array([0.13389171, 0.15541149, 0.1800171 ]),
#  'precision': array([0.07440217, 0.04831402, 0.0342394 ]),
#  'recall': array([0.12286333, 0.1958836 , 0.27530802])}

]
comparsion_gowa_bais=[
{'I_KL': 2.7083212304756756,
 'APT': [0.8948556500770665, 0.10072342420790942, 0.004347243619800326],
 'APT5': [0.7896644115480107, 0.10526492062427655, 0.08160961886261031, 0.01911380534530191, 0.004347243619800326],
 'I_bin': 87.22757814782355},
{'I_KL': 3.3839975331050574,
'APT': [0.9437303235314103, 0.05448456025185755, 0.001748275169133911],
'APT5': [0.8661966642106276, 0.07757050036840517, 0.04629245093442233, 0.008192109317435713, 0.001748275169133911],
'I_bin': 71.53330138955438},
{'I_KL': 3.462082854144393,
'APT': [0.9475986335320767, 0.05084399490923618, 0.0015339272556768784],
'APT5': [0.8732333043070815, 0.07438877352802817, 0.043278183401433516, 0.007565811507803474, 0.0015339272556768784],
'I_bin': 76.3827065745715},
{'I_KL': 3.1729475979479025,
'APT': [0.9338636211400956, 0.06415366066045687, 0.0019492263379998786],
'APT5': [0.85160426016481, 0.08229285283675346, 0.05375108848549628, 0.010402572174961485, 0.0019492263379998786],
 'I_bin': 62.04904405652536},
{'I_KL': 3.128871615235553,
'APT': [0.9373769174091058, 0.06103891754303469, 0.0015774666755978385],
'APT5': [0.850435394199242, 0.0869482215821478, 0.05148368946345903, 0.009555228079576575, 0.0015774666755978385],
'I_bin': 74.25516040785874},
# {'I_KL': 3.0710074605869733,
# 'APT': [0.9206376850425687, 0.07637484091365412, 0.0029338870654430846],
#  'APT5': [0.8323732333043318, 0.08831803871658407, 0.06310871458235377, 0.013266126331301697, 0.0029338870654430846],
#  'I_bin': 73.37920865077416}
]
comparsion_yelp_pre=[
{'ndcg': array([0.04267325, 0.05688579, 0.07428777]),
 'precision': array([0.03326702, 0.0270696 , 0.02229696]),
 'recall': array([0.03773448, 0.07570422, 0.12292101])},
{'ndcg': array([0.03583884, 0.0485257 , 0.06441394]),
 'precision': array([0.02832197, 0.02349501, 0.0196217 ]),
 'recall': array([0.03194291, 0.06526047, 0.10842256])},
{'ndcg': array([0.03601874, 0.04880342, 0.06434362]),
 'precision': array([0.0282967 , 0.02347859, 0.01950802]),
 'recall': array([0.03198814, 0.06575369, 0.10783267])},
{'ndcg': array([0.04096653, 0.05532861, 0.0730498 ]),
 'precision': array([0.03223759, 0.02662119, 0.0221738 ]),
 'recall': array([0.03646034, 0.07441861, 0.12247582])},
{'ndcg': array([0.03877276, 0.05207079, 0.06852899]),
 'precision': array([0.0303303 , 0.02496653, 0.02072123]),
 'recall': array([0.03424787, 0.06968516, 0.11432722])},
# {'ndcg': array([0.04157947, 0.05541923, 0.07281728]),
#  'precision': array([0.03261021, 0.02648352, 0.02198497]),
#  'recall': array([0.03676911, 0.07366238, 0.12076013])}
]
comparsion_yelp_bais=[
{'I_KL': 2.599647102508644,
'APT': [0.9452980927119425, 0.05446823291650666, 0.00020841227737779445],
'APT5': [0.8442686623721484, 0.1010231148162056, 0.05087785777440789, 0.0035903751420992506, 0.00020841227737779445],
'I_bin': 156.07688516510598},
{'I_KL': 2.90380681113873,
 'APT': [0.9522262220538533, 0.047486421624351974, 0.0002684097511683715],
 'APT5': [0.8579386131110703, 0.09428760894277162, 0.04407919666540332, 0.0034072249589490707, 0.0002684097511683715],
 'I_bin': 116.12761276127611},
{'I_KL': 3.008386972255101,
 'APT': [0.9559397499053106, 0.0438297334849056, 0.00021788556271314875],
'APT5': [0.8700454717696494, 0.08589427813565, 0.04059302766199335, 0.003236705822912705, 0.00021788556271314875],
'I_bin': 90.14517506404782},
{'I_KL': 2.7371724928371406,
 'APT': [0.9508210180624527, 0.04891688770999001, 0.00022735884804850302],
 'APT5': [0.8528735632184359, 0.09793798155865974, 0.04575912593153918, 0.0031577617784514177, 0.00022735884804850302],
 'I_bin': 112.97895112379594},
{'I_KL': 2.6159537313432555,
'APT': [0.9458317544524996, 0.05394088669950565, 0.00020209675382089172],
'APT5': [0.8388025767336523, 0.10702601995704165, 0.05046734874320944, 0.003473537956296549, 0.00020209675382089172],
'I_bin': 136.67673716012084},
# {'I_KL': 3.0419668748898716,
# 'APT': [0.9639130983958982, 0.03586901604143064, 0.0002020967538208916],
#  'APT5': [0.8926866237211527, 0.0712264746747453, 0.03321018062397492, 0.0026588354174561027, 0.0002020967538208916],
#  'I_bin': 98.43953994404724}
]
comparsion_amaz_pre=[
{'ndcg': array([0.02750632, 0.03900016, 0.05170249]),
 'precision': array([0.02133427, 0.01805672, 0.01506905]),
 'recall': array([0.02728043, 0.05567939, 0.0903921 ])},
{'ndcg': array([0.02129522, 0.03042907, 0.04078345]),
 'precision': array([0.0166062 , 0.01442167, 0.01224892]),
 'recall': array([0.02050304, 0.04326658, 0.07146996])},
{'ndcg': array([0.0214219 , 0.03030207, 0.04081433]),
 'precision': array([0.01683795, 0.01433125, 0.01226222]),
 'recall': array([0.02069785, 0.04302228, 0.07168935])},
{'ndcg': array([0.02296983, 0.0327615 , 0.0441889 ]),
 'precision': array([0.01783523, 0.01541326, 0.01320821]),
 'recall': array([0.02198702, 0.04650744, 0.07767935])},
{'ndcg': array([0.02227904, 0.03159518, 0.04235358]),
 'precision': array([0.01735463, 0.01484414, 0.0126296 ]),
 'recall': array([0.0214772 , 0.04474441, 0.07406953])},
]

comparsion_amaz_bais=[
{'I_KL': 2.858856766538247,
'APT': [0.927443344794268, 0.07112056683698996, 0.0014284900176661714],
'APT5': [0.8348118458295516, 0.09262769978914163, 0.05971734133692416, 0.011401325912277235, 0.0014284900176661714],
 'I_bin': 137.4849830242883},
{'I_KL': 2.9882026246270557,
'APT': [0.9412210550311364, 0.058119788005998235, 0.0006572573751495953],
'APT5': [0.8563151796061138, 0.08490587542502454, 0.05111790741408694, 0.0070018805919115695, 0.0006572573751495953],
'I_bin': 135.08596356171412},
{'I_KL': 3.101844773841405,
 'APT': [0.94531846589298, 0.0541477499382596, 0.0005128887031514172],
'APT5': [0.8657789259731541, 0.07953764033203609, 0.04729783636950435, 0.006849913568755581, 0.0005128887031514172],
'I_bin': 129.34398034398032},
{'I_KL': 3.01682848403016,
'APT': [0.9398818456395702, 0.059432403168508015, 0.0006705544896757425],
 'APT5': [0.85541477499391, 0.08446137188229315, 0.05145983321618812, 0.007972569952320388, 0.0006705544896757425],
'I_bin': 127.31076178960097},
{'I_KL': 2.85033335756092,
 'APT': [0.9381589195145538, 0.061202818988274045, 0.000638261497255098],
'APT5': [0.8484432878066392, 0.08970803335675574, 0.05380582413615745, 0.007396994852117126, 0.000638261497255098],
'I_bin': 143.12941816204457}
]

comparsion_cd_new_pre=[
{'ndcg': array([0.13237917, 0.15317605, 0.17689701]),
 'precision': array([0.07394333, 0.04763614, 0.03371291]),
 'recall': array([0.12210134, 0.19326836, 0.26948814])},
{'ndcg': array([0.02296983, 0.0327615 , 0.0441889 ]),
 'precision': array([0.01783523, 0.01541326, 0.01320821]),
 'recall': array([0.02198702, 0.04650744, 0.07767935])},
{'ndcg': array([0.04096653, 0.05532861, 0.0730498 ]),
 'precision': array([0.03223759, 0.02662119, 0.0221738 ]),
 'recall': array([0.03646034, 0.07441861, 0.12247582])},

{'ndcg': array([0.13389171, 0.15541149, 0.1800171 ]),
 'precision': array([0.07440217, 0.04831402, 0.0342394 ]),
 'recall': array([0.12286333, 0.1958836 , 0.27530802])},
{'ndcg': array([0.02397872, 0.03434449, 0.04624096]),
 'precision': array([0.01881542, 0.016224  , 0.01380924]),
 'recall': array([0.02345655, 0.04927093, 0.08177168])},
{'ndcg': array([0.04009333, 0.0534031 , 0.07004086]),
 'precision': array([0.03147973, 0.0256625 , 0.02128647]),
 'recall': array([0.03534028, 0.0709337 , 0.11594116])}

]
comparsion_cd_new_bais=[
{'I_KL': 3.1729475979479025,
'APT': [0.9338636211400956, 0.06415366066045687, 0.0019492263379998786],
'APT5': [0.85160426016481, 0.08229285283675346, 0.05375108848549628, 0.010402572174961485, 0.0019492263379998786],
 'I_bin': 62.04904405652536},
{'I_KL': 3.01682848403016,
'APT': [0.9398818456395702, 0.059432403168508015, 0.0006705544896757425],
 'APT5': [0.85541477499391, 0.08446137188229315, 0.05145983321618812, 0.007972569952320388, 0.0006705544896757425],
'I_bin': 127.31076178960097},
{'I_KL': 2.7371724928371406,
 'APT': [0.9508210180624527, 0.04891688770999001, 0.00022735884804850302],
 'APT5': [0.8528735632184359, 0.09793798155865974, 0.04575912593153918, 0.0031577617784514177, 0.00022735884804850302],
 'I_bin': 112.97895112379594},
{'I_KL': 3.0710074605869733,
'APT': [0.9206376850425687, 0.07637484091365412, 0.0029338870654430846],
 'APT5': [0.8323732333043318, 0.08831803871658407, 0.06310871458235377, 0.013266126331301697, 0.0029338870654430846],
 'I_bin': 73.37920865077416},
{'I_KL': 3.1111838681059485,
 'APT': [0.9335201261327049, 0.0651425640635931, 0.0013354102159831378],
'APT5': [0.856983834507995, 0.07652869327354735, 0.05425032767888915, 0.010892236384704716, 0.0013354102159831378],
'I_bin': 107.83080704629252},
{'I_KL': 3.002256125258899,
'APT': [0.9506094480232978, 0.04845901225211441, 0.0009252242010862736],
'APT5': [0.8788429960844332, 0.07176329417708081, 0.04214664645699116, 0.006312365795124276, 0.0009252242010862736],
'I_bin': 83.46863468634686}

]

comparsion_20210615_gowa=[
[0.0498727309263811, 0.012036975015071614, 0.00524817469354935, 0.0013631187621408081, 0.0005157746667559771],
[0.05049567954986501, 0.014167057405051149, 0.0058945676200681685, 0.0016411012124053974, 0.000579409203563533],
[0.6670473574921243, 0.21306517516244156, 0.08766494741777202, 0.025005023779222674, 0.006812244624556122],
[0.6381539285953447, 0.23200817201420867, 0.09510683903810564, 0.027118360238463316, 0.007160559983923777]
]
comparsion_20210615_amaz=[
[0.017342427687256586, 0.006691297208538369, 0.003239863584691131, 0.0008999621068586627, 0.00010736390046734879],
[0.01876973601111691, 0.007831249210559272, 0.00415245673866355, 0.0012915245673866449, 0.00016420361247947447],
[0.5912498421119051, 0.24819060250095207, 0.11901919919160234, 0.03575533661740663, 0.0049987368952885605],
[0.5777219906530182, 0.25381457622837417, 0.12594732853352344, 0.037170013894152594, 0.004742958191233996]
]
comparsion_20210615_yelp=[
[0.009999430123663812, 0.003675702372585039, 0.0017248257128203068, 0.0008757099709363118, 0.00033052827536424564],
[0.01072697224702321, 0.00388085785384559, 0.001878692323765724, 0.000987785650513845, 0.0003609216799954409],
[0.6304427939137502, 0.2354615048534733, 0.09366677430997214, 0.032933153505688206, 0.007436886195695573],
[0.6357939327166304, 0.22954428888933914, 0.09303041240050532, 0.03318769826947453, 0.008352487510210348]
]
def plot_metrics(data, key='precision', topk=1, title='Gowa MF'):
    d = [bag[key][topk] for bag in data]
    x = dims
    plt.plot(x, d, marker="^")
    plt.xlabel("Dims")
    plt.ylabel(f"{key}")
    plt.title(title)
    plt.xticks(x)
    plt.show()

def plot_metrics_double(data1,data2, data3,key='precision', topk=1, title='Gowa MF'):
    d1 = [bag[key][topk] for bag in data1]
    d2 = [bag[key][topk] for bag in data2]
    d3 = [bag[key][topk] for bag in data3]
    x = dims
    plt.plot(x, d1, marker="^")
    plt.plot(x, d3)
    plt.plot(x, d2, marker="_")

    plt.xlabel("pop")
    plt.ylabel(f"{key}")
    plt.title(title)
    plt.xticks(x)
    plt.legend(["bais",'no bais',"unbais"])
    plt.show()

def plot_bias(data, key='APT', title="Gowa lgn",b=0):
    if key == "APT":
        #d_SH = [bag[key][0] for bag in data]
        #d_MT = [bag[key][1] for bag in data]
        d_LT = [bag[key][b] for bag in data]
        x = dims
        #plt.plot(x, d_SH, label="Short Head", marker="^")
        #plt.plot(x, d_MT, label="Medium Tail", marker="^")
        plt.plot(x, d_LT, label=title, marker="^")
        plt.legend()
    else:
        d = [bag[key] for bag in data]
        x = dims
        plt.plot(x, d, marker="^")
    plt.xticks(x)
    plt.xlabel("Dims")
    plt.ylabel(f"{key}")
    plt.title(title)
    plt.show()

def plot_new(data, key='APT', title="Gowa lgn",co='blue'):
    labels = dims
    width = 0.35

    if key == 'Short Head':
        d_1 = [round(bag['APT'][0], 5) for bag in data]

    elif key == 'Medium Tail':
        d_1 = [round(bag['APT'][1], 5) for bag in data]

    elif key == 'Short Tail':
        d_1 = [round(bag['APT'][2], 5) for bag in data]

    else:
        d_1 = [round(bag[key][0], 5) for bag in data]
    bar1=plt.bar(labels, d_1, width,color=co)
    plt.ylabel(f"{key}")
    plt.title(title)
    plt.xlabel("model")
    # ax.text(.5,.93, '1-teacher   2-student   3-distillation   4-PCA', transform=ax.transAxes,
    #         ha='center', va='center', fontsize=10, color='black', fontweight='bold')
    plt.xticks(labels)
    for rect in bar1:
        height = rect.get_height()  # 获得bar1的高度
        plt.text(rect.get_x() + rect.get_width() / 2, height, str(height), ha="center", va="bottom")
    plt.show()

def plot_com(data, key='APT', title="Gowa lgn",co='red'):
    labels = dims
    width = 0.35
    fig, ax = plt.subplots()
    if key=='Short Head':
        d_1 = [round(bag['APT'][0],5) for bag in data[:3]]
        d_2 = [round(bag['APT'][0],5) for bag in data[3:]]
    elif key=='Medium Tail':
        d_1 = [round(bag['APT'][1],5) for bag in data[:3]]
        d_2 = [round(bag['APT'][1],5) for bag in data[3:]]
    elif key=='Short Tail':
        d_1 = [round(bag['APT'][2],5) for bag in data[:3]]
        d_2 = [round(bag['APT'][2],5) for bag in data[3:]]
    else:
        d_1 = [round(bag[key][0],5) for bag in data[:3]]
        d_2 = [round(bag[key][0],5) for bag in data[3:]]

    bar1 = plt.bar([i - 0.2 for i in range(3)], height=d_1, width=0.35, color='r', label='cd')  # 第一个图
    bar2 = plt.bar([i + 0.2 for i in range(3)], height=d_2, width=0.35, color='g', label='new')
    plt.ylabel(f"{key}")
    plt.title(title)
    plt.xlabel("data")
    for rect in bar1:
        height = rect.get_height()  # 获得bar1的高度
        plt.text(rect.get_x() + rect.get_width() / 2, height, str(height), ha="center", va="bottom")
    for rect in bar2:
        height = rect.get_height()
        plt.text(rect.get_x() + rect.get_width() / 2, height, str(height), ha="center", va="bottom")

    # ax.text(.5,.93, '1-teacher   2-student   3-distillation   4-PCA', transform=ax.transAxes,
    #         ha='center', va='center', fontsize=10, color='black', fontweight='bold')
    plt.xticks(range(3),['gowa','amaz','yelp'])
    plt.legend(loc="lower left")
    #loc="lower left"
    plt.show()


def plot_new_com(data, key='APT', title="Gowa lgn",co='red'):
    labels = dims
    width = 0.35
    fig, ax = plt.subplots()
    if key=='precision':
        d_1 = [round(bag,5) for bag in data[0]]
        d_2 = [round(bag,5) for bag in data[1]]
    else:
        d_1 = [round(bag,5) for bag in data[2]]
        d_2 = [round(bag,5) for bag in data[3]]

    bar1 = plt.bar([i - 0.2 for i in range(5)], height=d_1, width=0.35, color='r', label='old')  # 第一个图
    bar2 = plt.bar([i + 0.2 for i in range(5)], height=d_2, width=0.35, color='g', label='new')
    plt.ylabel(f"{key}")
    plt.title(title)
    plt.xlabel("data")
    for rect in bar1:
        height = rect.get_height()  # 获得bar1的高度
        plt.text(rect.get_x() + rect.get_width() / 2, height, str(height), ha="center", va="bottom")
    for rect in bar2:
        height = rect.get_height()
        plt.text(rect.get_x() + rect.get_width() / 2, height, str(height), ha="center", va="bottom")

    # ax.text(.5,.93, '1-teacher   2-student   3-distillation   4-PCA', transform=ax.transAxes,
    #         ha='center', va='center', fontsize=10, color='black', fontweight='bold')
    plt.xticks(range(5))
    plt.legend()
    #loc="lower left"
    plt.show()
if __name__ == "__main__":
    # data = comparsion_yelp_pre
    # bias = comparsion_yelp_bais
    title = 'lgn'
    # data1 =pla.comparsion_20210627_gowa_100_precision
    # data2 = pla.comparsion_20210627_yelp_100_precision
    # data3 = pla.comparsion_20210627_amaz_64_precision
    # bias1=pla.comparsion_20210627_gowa_100_APT
    # bias2 = pla.comparsion_20210627_yelp_100_APT
    # bias3 =pla.comparsion_20210627_amaz_64_APT
    # #plot_metrics(data, key='precision',title='gowa pca')
    # plot_new(data3, key='precision', title='amaz_precision', co=['green','red','black','orange','yellow','blue'])
    # plot_new(bias3, key='Short Head',title='amaz Short Head',co=['green','red','black','orange','yellow','blue'])
    # plot_new(bias3, key='Medium Tail', title='amaz Medium Tail', co=['green', 'red', 'black', 'orange', 'yellow', 'blue'])
    # plot_new(bias3, key='Short Tail', title='amaz Short Tail', co=['green', 'red', 'black', 'orange', 'yellow', 'blue'])

    # plot_com(data, key='precision', title='precision', co=['green', 'red', 'black', 'orange', 'yellow', 'blue'])
    # plot_com(bias, key='Short Head',title='Short Head',co=['green','red','black','orange','yellow','blue'])
    # plot_com(bias, key='Medium Tail', title='Medium Tail', co=['green', 'red', 'black', 'orange', 'yellow', 'blue'])
    # plot_com(bias, key='Short Tail', title='Short Tail', co=['green', 'red', 'black', 'orange', 'yellow', 'blue'])
    # plot_com(data, key='precision', title='precision', co=['green', 'red', 'black', 'orange', 'yellow', 'blue'])
    # plot_new_com(data1, key='account', title='gowa account ratio', co=['green', 'red', 'black', 'orange', 'yellow', 'blue'])
    # plot_new_com(data2, key='account', title='amaz account ratio', co=['green', 'red', 'black', 'orange', 'yellow', 'blue'])
    # plot_new_com(data3, key='account', title='yelp account ratio', co=['green', 'red', 'black', 'orange', 'yellow', 'blue'])
    #plot_bias(bias,key='APT', title=title)
    #plot_bias(bias, key='APT5', title=title)
    # plot_bias(bias, key='I_KL', title=title)
    # plot_bias(bias, key='I_bin', title=title)
    data1=pla.UD_100_10_kwai_m
    data2 = pla.UD_100_10_kwai_b
    data3 = pla.BPRMF_100_gowa
    plot_new(data1, key='precision', title='kwai precision',co='red')
    plot_new(data2, key='Short Head', title='kwai Short Head',co='yellow' )
    #plot_metrics_double(data1=data1,data2=data2, data3=data3,topk=1, title='gowa_MF')
    #bais=pla.BPRMF_kwai_bais
    #plot_metrics(data=data1,topk=1,title='douban_MF')
    #plot_metrics(data=data2, topk=1, title='douban_300')
    # plot_bias(data=bais,title='kwai long head',b=0)
    # plot_bias(data=bais, title='kwai medium tail', b=1)
    # plot_bias(data=bais, title='kwai short tail', b=2)
